# HAL-O-SWARM

**ë¶„ì‚° LLM ì—ì´ì „íŠ¸ ìŠˆí¼ë°”ì´ì €** â€” ì—¬ëŸ¬ ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ëŠ” ììœ¨ LLM ì½”ë”© ì—ì´ì „íŠ¸ë¥¼ ìœ„í•œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ë° ì œì–´ í”Œë ˆì¸

![Version](https://img.shields.io/badge/version-1.0.0-blue)
![License](https://img.shields.io/badge/license-MIT-green)
![Status](https://img.shields.io/badge/status-production-brightgreen)

## ê°œìš”

HAL-O-SWARMì€ ë¶„ì‚°ëœ LLM ì½”ë”© ì—ì´ì „íŠ¸ì— ëŒ€í•œ ì¤‘ì•™ ì§‘ì¤‘ì‹ ê°ë…ì„ ì œê³µí•˜ì—¬ ì¸í”„ë¼ ì „ì²´ì—ì„œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§, ì›ê²© ì œì–´, ë¹„ìš© ì¶”ì  ë° ìë™ ê°œì…ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

**ì£¼ìš” ê¸°ëŠ¥:**
- ğŸ” **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§** â€” ëª¨ë“  ë…¸ë“œì—ì„œ ì—ì´ì „íŠ¸ ì„¸ì…˜, ì´ë²¤íŠ¸ ë° ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì¶”ì 
- ğŸ® **í†µí•© ì œì–´** â€” Discord ëª…ë ¹, HTTP API ë˜ëŠ” CLIë¥¼ í†µí•œ ì„¸ì…˜ ê´€ë¦¬
- ğŸ’° **ë¹„ìš© ì¶”ì ** â€” ì—¬ëŸ¬ ì œê³µì—…ì²´ì˜ LLM API ë¹„ìš© ì§‘ê³„ ë° ë¶„ì„
- ğŸ¤– **ìë™ ê°œì…** â€” ìë™ ì„¸ì…˜ ë³µêµ¬, ì¬ì‹œì‘ ë° ë¹„ìš© ê´€ë¦¬
- ğŸ“Š **ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°** â€” í•„í„°ë§ ë° ì˜ì†ì„±ì„ ê°–ì¶˜ ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ íŒŒì´í”„ë¼ì¸
- ğŸ”’ **ë³´ì•ˆ ë° ê°ì‚¬** â€” TLS ì§€ì›, origin ê²€ì¦ ë° ì™„ì „í•œ ê°ì‚¬ ì¶”ì 

---

## ì•„í‚¤í…ì²˜

### ì‹œìŠ¤í…œ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì œì–´ ì¸í„°í˜ì´ìŠ¤                          â”‚
â”‚  Discord Bot  â”‚  HTTP API  â”‚  CLI (halctl)  â”‚  Prometheus   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  hal-supervisor (ì¤‘ì•™ í—ˆë¸Œ)                  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   ì„¸ì…˜       â”‚  â”‚   ì´ë²¤íŠ¸     â”‚  â”‚   ëª…ë ¹       â”‚      â”‚
â”‚  â”‚   íŠ¸ë˜ì»¤     â”‚  â”‚  íŒŒì´í”„ë¼ì¸  â”‚  â”‚  ë””ìŠ¤íŒ¨ì²˜    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚    ë¹„ìš©      â”‚  â”‚    ì •ì±…      â”‚  â”‚    ë…¸ë“œ      â”‚      â”‚
â”‚  â”‚   ì§‘ê³„ê¸°     â”‚  â”‚    ì—”ì§„      â”‚  â”‚  ë ˆì§€ìŠ¤íŠ¸ë¦¬  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                               â”‚
â”‚  ì €ì¥ì†Œ: SQLite (ì„¸ì…˜, ì´ë²¤íŠ¸, ë¹„ìš©, ê°ì‚¬)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ WebSocket (ì–‘ë°©í–¥)
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚              â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   hal-agent       â”‚ â”‚   hal-agent     â”‚ â”‚   hal-agent     â”‚
â”‚   (ë…¸ë“œ A)        â”‚ â”‚   (ë…¸ë“œ B)      â”‚ â”‚   (ë…¸ë“œ C)      â”‚
â”‚                   â”‚ â”‚                 â”‚ â”‚                 â”‚
â”‚  opencode serve   â”‚ â”‚  opencode serve â”‚ â”‚  opencode serve â”‚
â”‚  â”œâ”€ í”„ë¡œì íŠ¸-1    â”‚ â”‚  â”œâ”€ í”„ë¡œì íŠ¸-3  â”‚ â”‚  â”œâ”€ í”„ë¡œì íŠ¸-5  â”‚
â”‚  â”œâ”€ í”„ë¡œì íŠ¸-2    â”‚ â”‚  â””â”€ í”„ë¡œì íŠ¸-4  â”‚ â”‚  â””â”€ í”„ë¡œì íŠ¸-6  â”‚
â”‚  â””â”€ í”„ë¡œì íŠ¸-3    â”‚ â”‚                 â”‚ â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì»´í¬ë„ŒíŠ¸ ì—­í• 

#### Supervisor (ì¤‘ì•™ í—ˆë¸Œ)
- **ì„¸ì…˜ íŠ¸ë˜ì»¤**: ë…¸ë“œ ì „ì²´ì˜ ëª¨ë“  ì—ì´ì „íŠ¸ ì„¸ì…˜ ìƒíƒœ ìœ ì§€
- **ì´ë²¤íŠ¸ íŒŒì´í”„ë¼ì¸**: ì¤‘ë³µ ì œê±°ë¥¼ í†µí•œ ì´ë²¤íŠ¸ ì²˜ë¦¬, ì •ë ¬ ë° ì˜ì†í™”
- **ëª…ë ¹ ë””ìŠ¤íŒ¨ì²˜**: ë©±ë“±ì„± ë³´ì¥ê³¼ í•¨ê»˜ ì—ì´ì „íŠ¸ë¡œ ëª…ë ¹ ë¼ìš°íŒ…
- **ë¹„ìš© ì§‘ê³„ê¸°**: LLM ì œê³µì—…ì²´ API í´ë§ ë° ì‚¬ìš©ëŸ‰ ë°ì´í„° ì§‘ê³„
- **ì •ì±… ì—”ì§„**: ìë™ ê°œì… ê·œì¹™ ì‹¤í–‰ (ì¬ê°œ, ì¬ì‹œì‘, ì¢…ë£Œ)
- **ë…¸ë“œ ë ˆì§€ìŠ¤íŠ¸ë¦¬**: í•˜íŠ¸ë¹„íŠ¸ ëª¨ë‹ˆí„°ë§ì„ í†µí•œ ì—ì´ì „íŠ¸ ìƒíƒœ ì¶”ì 

#### Agent (ë…¸ë“œ í”„ë¡œì„¸ìŠ¤)
- **WebSocket í´ë¼ì´ì–¸íŠ¸**: ìë™ ì¬ì—°ê²°ì„ í†µí•œ ìŠˆí¼ë°”ì´ì €ì™€ì˜ ì§€ì†ì  ì—°ê²° ìœ ì§€
- **opencode ì–´ëŒ‘í„°**: ì„¸ì…˜ ê´€ë¦¬ë¥¼ ìœ„í•œ opencode SDK ë˜í•‘
- **ì´ë²¤íŠ¸ í¬ì›Œë”**: ì‹¤ì‹œê°„ìœ¼ë¡œ ìŠˆí¼ë°”ì´ì €ì— ì„¸ì…˜ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°
- **í™˜ê²½ ì²´ì»¤**: ëŸ°íƒ€ì„, ë„êµ¬ ë° í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ ê²€ì¦
- **ìë™ í”„ë¡œë¹„ì €ë„ˆ**: ëˆ„ë½ëœ íŒŒì¼ ë° ì„¤ì •ì„ ì•ˆì „í•˜ê²Œ ìƒì„±

#### CLI ë„êµ¬ (halctl)
- ì›ê²© ì„¸ì…˜ ê´€ë¦¬
- ë…¸ë“œ ìƒíƒœ ì¡°íšŒ
- ë¹„ìš© ë³´ê³ 
- í™˜ê²½ ê²€ì¦

---

## ë¹ ë¥¸ ì‹œì‘

### ì„¤ì¹˜

```bash
# ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ì„¤ì¹˜ (ë¦´ë¦¬ì¦ˆ ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ, ë¡œì»¬ ë¹Œë“œ/í´ë¡  ì—†ìŒ)
curl -fsSL https://raw.githubusercontent.com/Bldg-7/hal-o-swarm/main/deploy/install-release.sh | sudo bash -s -- --all

# ë˜ëŠ” ê°œë³„ ì„¤ì¹˜
curl -fsSL https://raw.githubusercontent.com/Bldg-7/hal-o-swarm/main/deploy/install-release.sh | sudo bash -s -- --supervisor  # ì¤‘ì•™ í—ˆë¸Œë§Œ
curl -fsSL https://raw.githubusercontent.com/Bldg-7/hal-o-swarm/main/deploy/install-release.sh | sudo bash -s -- --agent       # ì—ì´ì „íŠ¸ë§Œ
curl -fsSL https://raw.githubusercontent.com/Bldg-7/hal-o-swarm/main/deploy/install-release.sh | sudo bash -s -- --halctl      # CLI ë„êµ¬ë§Œ
```

### ì„¤ì •

#### Supervisor ì„¤ì • (`/etc/hal-o-swarm/supervisor.config.json`)

```json
{
  "server": {
    "port": 8420,
    "http_port": 8421,
    "auth_token": "ì—¬ê¸°ì—-ê³µìœ -ë¹„ë°€-í† í°-ì…ë ¥"
  },
  "database": {
    "path": "/var/lib/hal-o-swarm/supervisor.db"
  },
  "channels": {
    "discord": {
      "bot_token": "ë””ìŠ¤ì½”ë“œ-ë´‡-í† í°",
      "guild_id": "ê¸¸ë“œ-ID"
    }
  },
  "cost": {
    "poll_interval_minutes": 60,
    "providers": {
      "anthropic": {
        "admin_api_key": "sk-ant-..."
      },
      "openai": {
        "org_api_key": "sk-..."
      }
    }
  },
  "policies": {
    "resume_on_idle": {
      "enabled": true,
      "idle_threshold_seconds": 300,
      "max_retries": 3
    }
  }
}
```

#### Agent ì„¤ì • (`/etc/hal-o-swarm/agent.config.json`)

```json
{
  "supervisor_url": "ws://ìŠˆí¼ë°”ì´ì €-í˜¸ìŠ¤íŠ¸:8420",
  "auth_token": "ì—¬ê¸°ì—-ê³µìœ -ë¹„ë°€-í† í°-ì…ë ¥",
  "opencode_port": 4096,
  "projects": [
    {
      "name": "ë‚´-í”„ë¡œì íŠ¸",
      "directory": "/home/user/ë‚´-í”„ë¡œì íŠ¸"
    }
  ]
}
```

### ì„œë¹„ìŠ¤ ì‹œì‘

```bash
# Supervisor ì‹œì‘
sudo systemctl start hal-supervisor
sudo systemctl enable hal-supervisor

# ê° ë…¸ë“œì—ì„œ Agent ì‹œì‘
sudo systemctl start hal-agent
sudo systemctl enable hal-agent

# ìƒíƒœ í™•ì¸
sudo systemctl status hal-supervisor
sudo systemctl status hal-agent
```

### ì„¤ì¹˜ í™•ì¸

```bash
# ë…¸ë“œ ì—°ê²° í™•ì¸
halctl nodes list

# ì„¸ì…˜ í™•ì¸
halctl sessions list

# í—¬ìŠ¤ ì²´í¬
curl http://localhost:8421/healthz
curl http://localhost:8421/readyz
```

---

## ì‚¬ìš©ë²•

### Discord ëª…ë ¹

ì„¤ì • ì™„ë£Œ í›„ Discordì—ì„œ ë‹¤ìŒ ìŠ¬ë˜ì‹œ ëª…ë ¹ ì‚¬ìš©:

```
/status <í”„ë¡œì íŠ¸>          # ì„¸ì…˜ ìƒíƒœ ì¡°íšŒ
/nodes                     # ì—°ê²°ëœ ëª¨ë“  ë…¸ë“œ ëª©ë¡
/logs <ì„¸ì…˜-ID>            # ì„¸ì…˜ ë¡œê·¸ ì¡°íšŒ
/resume <í”„ë¡œì íŠ¸>         # ìœ íœ´ ì„¸ì…˜ ì¬ê°œ
/restart <ì„¸ì…˜-ID>         # ì„¸ì…˜ ì¬ì‹œì‘
/kill <ì„¸ì…˜-ID>            # ì„¸ì…˜ ì¢…ë£Œ
/start <í”„ë¡œì íŠ¸>          # ìƒˆ ì„¸ì…˜ ìƒì„±
/cost [today|week|month]   # ë¹„ìš© ë³´ê³ ì„œ ì¡°íšŒ
```

### CLI ë„êµ¬ (halctl)

```bash
# ì„¸ì…˜ ê´€ë¦¬
halctl sessions list
halctl sessions get <ì„¸ì…˜-ID>
halctl sessions logs <ì„¸ì…˜-ID> --limit 100

# ë…¸ë“œ ê´€ë¦¬
halctl nodes list
halctl nodes get <ë…¸ë“œ-ID>

# ë¹„ìš© ë³´ê³ 
halctl cost today
halctl cost week
halctl cost month

# í™˜ê²½ ê´€ë¦¬
halctl env status <í”„ë¡œì íŠ¸>
halctl env check <í”„ë¡œì íŠ¸>
halctl env provision <í”„ë¡œì íŠ¸>
```

### HTTP API

```bash
# ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ
curl -H "Authorization: Bearer <í† í°>" \
  http://localhost:8421/api/v1/sessions

# ì„¸ì…˜ ìƒì„¸ ì •ë³´ ì¡°íšŒ
curl -H "Authorization: Bearer <í† í°>" \
  http://localhost:8421/api/v1/sessions/<ì„¸ì…˜-ID>

# ë…¸ë“œ ëª©ë¡ ì¡°íšŒ
curl -H "Authorization: Bearer <í† í°>" \
  http://localhost:8421/api/v1/nodes

# ëª…ë ¹ ì‹¤í–‰
curl -X POST -H "Authorization: Bearer <í† í°>" \
  -H "Content-Type: application/json" \
  -d '{"type":"restart_session","target":"<ì„¸ì…˜-ID>"}' \
  http://localhost:8421/api/v1/commands

# ë¹„ìš© ë³´ê³ ì„œ ì¡°íšŒ
curl -H "Authorization: Bearer <í† í°>" \
  http://localhost:8421/api/v1/cost?period=week
```

---

## ê¸°ëŠ¥

### ì„¸ì…˜ ê´€ë¦¬

**ì¸í”„ë¼ ì „ì²´ì—ì„œ LLM ì—ì´ì „íŠ¸ ì„¸ì…˜ ì¶”ì  ë° ì œì–´:**

- **ì‹¤ì‹œê°„ ìƒíƒœ ì¶”ì **: ì„¸ì…˜ ìƒíƒœ ëª¨ë‹ˆí„°ë§ (running, idle, error, completed)
- **ì›ê²© ê°œì…**: ì‹¤í–‰ ì¤‘ì¸ ì„¸ì…˜ ì¬ì‹œì‘, ì¢…ë£Œ ë˜ëŠ” í”„ë¡¬í”„íŠ¸ ì£¼ì…
- **ì´ë²¤íŠ¸ íˆìŠ¤í† ë¦¬**: ëª¨ë“  ì„¸ì…˜ ì´ë²¤íŠ¸ì˜ ì™„ì „í•œ ê°ì‚¬ ì¶”ì 
- **ë‹¤ì¤‘ í”„ë¡œì íŠ¸ ì§€ì›**: ê° ì—ì´ì „íŠ¸ê°€ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ë™ì‹œì— ê´€ë¦¬ ê°€ëŠ¥

### ì´ë²¤íŠ¸ íŒŒì´í”„ë¼ì¸

**ìˆœì„œ ë³´ì¥ì„ í†µí•œ ì•ˆì •ì ì¸ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°:**

- **ì‹œí€€ìŠ¤ ì¶”ì **: ì—ì´ì „íŠ¸ë³„ ë‹¨ì¡° ì¦ê°€ ì‹œí€€ìŠ¤ ë²ˆí˜¸ë¡œ ì´ë²¤íŠ¸ ì†ì‹¤ ë°©ì§€
- **ì¤‘ë³µ ì œê±°**: LRU ìºì‹œë¡œ ì¤‘ë³µ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë°©ì§€
- **ê°­ ê°ì§€**: ëˆ„ë½ëœ ì´ë²¤íŠ¸ ìë™ ê°ì§€ ë° ì¬ìƒ
- **ì˜ì†ì„±**: íš¨ìœ¨ì ì¸ ì¸ë±ì‹±ì„ í†µí•œ SQLite ì €ì¥ì†Œ

### ë¹„ìš© ì¶”ì 

**LLM ì œê³µì—…ì²´ ì „ë°˜ì˜ í¬ê´„ì ì¸ ë¹„ìš© ê°€ì‹œì„±:**

- **ë‹¤ì¤‘ ì œê³µì—…ì²´ ì§€ì›**: Anthropic, OpenAI ë° ê¸°íƒ€ í™•ì¥ ê°€ëŠ¥
- **ì¼ì¼ ë²„í‚·íŒ…**: ë‚ ì§œ, ì œê³µì—…ì²´ ë° ëª¨ë¸ë³„ ë¹„ìš© ì§‘ê³„
- **í”„ë¡œì íŠ¸ ê·€ì†**: ì°¨ì§€ë°±ì„ ìœ„í•œ í”„ë¡œì íŠ¸ë³„ ë¹„ìš© ì¶”ì 
- **ì¶”ì„¸ ë¶„ì„**: ì˜ˆì‚° ë° ì˜ˆì¸¡ì„ ìœ„í•œ ê³¼ê±° ë¹„ìš© ë°ì´í„°

### ìë™ ê°œì… ì •ì±…

**êµ¬ì„± ê°€ëŠ¥í•œ ê·œì¹™ ê¸°ë°˜ ìë™ ì„¸ì…˜ ê´€ë¦¬:**

- **ìœ íœ´ ì‹œ ì¬ê°œ**: ì„ê³„ê°’ì„ ì´ˆê³¼í•œ ìœ íœ´ ì„¸ì…˜ ìë™ ì¬ê°œ
- **ì••ì¶• ì‹œ ì¬ì‹œì‘**: ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš°ê°€ ê°€ë“ ì°° ë•Œ ì„¸ì…˜ ì¬ì‹œì‘
- **ë¹„ìš© ì´ˆê³¼ ì‹œ ì¢…ë£Œ**: ë¹„ìš© í•œë„ë¥¼ ì´ˆê³¼í•˜ëŠ” ì„¸ì…˜ ì¢…ë£Œ
- **ì¬ì‹œë„ ì œí•œ**: ë¬´í•œ ë£¨í”„ ë°©ì§€ë¥¼ ìœ„í•œ êµ¬ì„± ê°€ëŠ¥í•œ ì¬ì‹œë„ ìƒí•œ
- **ì¬ì„¤ì • ìœˆë„ìš°**: ì¼ì‹œì  ì‹¤íŒ¨ë¥¼ ìœ„í•œ ì‹œê°„ ê¸°ë°˜ ì¬ì‹œë„ ì¹´ìš´í„° ì¬ì„¤ì •

### ë³´ì•ˆ

**í”„ë¡œë•ì…˜ê¸‰ ë³´ì•ˆ ê¸°ëŠ¥:**

- **TLS ì§€ì›**: WebSocket ì—°ê²°ì„ ìœ„í•œ ì„ íƒì  WSS ì•”í˜¸í™”
- **Origin ê²€ì¦**: í—ˆìš© ëª©ë¡ ê¸°ë°˜ origin í™•ì¸
- **í† í° ì¸ì¦**: ëª¨ë“  ì—°ê²°ì— ëŒ€í•œ ê³µìœ  ë¹„ë°€ ì¸ì¦
- **ê°ì‚¬ ë¡œê¹…**: í–‰ìœ„ì ì¶”ì ì„ í†µí•œ ì™„ì „í•œ ëª…ë ¹ ê°ì‚¬ ì¶”ì 
- **ë¹„ë°€ ì •ë³´ ì œê±°**: ë¡œê·¸ì—ì„œ ë¹„ë°€ ì •ë³´ ìë™ ì‚­ì œ

### ê´€ì°°ì„±

**ë‚´ì¥ ëª¨ë‹ˆí„°ë§ ë° ì§„ë‹¨:**

- **Prometheus ë©”íŠ¸ë¦­**: ëª¨ë“  ì‘ì—…ì— ëŒ€í•œ ì¹´ìš´í„°, ê²Œì´ì§€ ë° íˆìŠ¤í† ê·¸ë¨
- **í—¬ìŠ¤ ì—”ë“œí¬ì¸íŠ¸**: ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì„ ìœ„í•œ ë¼ì´ë¸Œë‹ˆìŠ¤ ë° ë ˆë””ë‹ˆìŠ¤ í”„ë¡œë¸Œ
- **êµ¬ì¡°í™”ëœ ë¡œê¹…**: ìƒê´€ IDê°€ í¬í•¨ëœ JSON ë¡œê·¸
- **ìƒê´€ ì¶”ì **: ì»´í¬ë„ŒíŠ¸ ê°„ ìš”ì²­ ì¶”ì 

---

## ëª¨ë‹ˆí„°ë§

### í—¬ìŠ¤ ì²´í¬

```bash
# ë¼ì´ë¸Œë‹ˆìŠ¤ í”„ë¡œë¸Œ (ì‹¤í–‰ ì¤‘ì´ë©´ í•­ìƒ 200 ë°˜í™˜)
curl http://localhost:8421/healthz

# ë ˆë””ë‹ˆìŠ¤ í”„ë¡œë¸Œ (ëª¨ë“  ì»´í¬ë„ŒíŠ¸ í™•ì¸)
curl http://localhost:8421/readyz
# ë°˜í™˜: {"status":"healthy","components":{"database":"ok",...}}
```

### Prometheus ë©”íŠ¸ë¦­

```bash
# ë©”íŠ¸ë¦­ ì—”ë“œí¬ì¸íŠ¸ ìŠ¤í¬ë©
curl http://localhost:8421/metrics

# ì£¼ìš” ë©”íŠ¸ë¦­:
# - hal_o_swarm_commands_total{type,status}
# - hal_o_swarm_events_total{type}
# - hal_o_swarm_connections_active
# - hal_o_swarm_sessions_active{status}
# - hal_o_swarm_nodes_online
# - hal_o_swarm_command_duration_seconds{type}
```

### ë¡œê·¸

```bash
# Supervisor ë¡œê·¸
sudo journalctl -u hal-supervisor -f

# Agent ë¡œê·¸
sudo journalctl -u hal-agent -f

# ìƒê´€ IDë¡œ í•„í„°ë§
sudo journalctl -u hal-supervisor | grep "correlation_id=abc123"
```

---

## ì„¤ì • ì°¸ì¡°

### Supervisor ì„¤ì •

| ì„¹ì…˜ | í‚¤ | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|-----|------|--------|
| `server` | `port` | WebSocket ì„œë²„ í¬íŠ¸ | 8420 |
| `server` | `http_port` | HTTP API í¬íŠ¸ | 8421 |
| `server` | `auth_token` | ì¸ì¦ìš© ê³µìœ  ë¹„ë°€ | (í•„ìˆ˜) |
| `server` | `heartbeat_interval_sec` | í•˜íŠ¸ë¹„íŠ¸ ê°„ê²© | 30 |
| `server` | `heartbeat_timeout_count` | ì˜¤í”„ë¼ì¸ ì „ ëˆ„ë½ í•˜íŠ¸ë¹„íŠ¸ ìˆ˜ | 3 |
| `database` | `path` | SQLite ë°ì´í„°ë² ì´ìŠ¤ ê²½ë¡œ | `/var/lib/hal-o-swarm/supervisor.db` |
| `security.tls` | `enabled` | TLS/WSS í™œì„±í™” | false |
| `security.tls` | `cert_path` | TLS ì¸ì¦ì„œ ê²½ë¡œ | - |
| `security.tls` | `key_path` | TLS ê°œì¸ í‚¤ ê²½ë¡œ | - |
| `security` | `origin_allowlist` | í—ˆìš©ëœ WebSocket origin | `["*"]` |
| `policies.resume_on_idle` | `enabled` | ìë™ ì¬ê°œ í™œì„±í™” | false |
| `policies.resume_on_idle` | `idle_threshold_seconds` | ìœ íœ´ ì„ê³„ê°’ | 300 |
| `policies.resume_on_idle` | `max_retries` | ìµœëŒ€ ì¬ì‹œë„ íšŸìˆ˜ | 3 |

### Agent ì„¤ì •

| ì„¹ì…˜ | í‚¤ | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|-----|------|--------|
| - | `supervisor_url` | Supervisor WebSocket URL | (í•„ìˆ˜) |
| - | `auth_token` | ì¸ì¦ìš© ê³µìœ  ë¹„ë°€ | (í•„ìˆ˜) |
| - | `opencode_port` | opencode serve í¬íŠ¸ | 4096 |
| `projects[]` | `name` | í”„ë¡œì íŠ¸ ì´ë¦„ | (í•„ìˆ˜) |
| `projects[]` | `directory` | í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ê²½ë¡œ | (í•„ìˆ˜) |

---

## ë¬¸ì„œ

- **[DEPLOYMENT.md](docs/DEPLOYMENT.md)** â€” í”„ë¡œë•ì…˜ ëª¨ë²” ì‚¬ë¡€ê°€ í¬í•¨ëœ ì™„ì „í•œ ë°°í¬ ê°€ì´ë“œ
- **[RUNBOOK.md](docs/RUNBOOK.md)** â€” ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ ì ˆì°¨ ë° ë¬¸ì œ í•´ê²°
- **[ROLLBACK.md](docs/ROLLBACK.md)** â€” ì•ˆì „í•œ ë¡¤ë°± ë° ë³µêµ¬ ì ˆì°¨
- **[DEVELOPMENT.md](docs/DEVELOPMENT.md)** â€” ê¸°ì—¬ìë¥¼ ìœ„í•œ ê°œë°œ ê°€ì´ë“œ
- **[ì œí’ˆ ì‚¬ì–‘](Hal-o-swarm_Product_Spec_v1.1.md)** â€” ìƒì„¸í•œ ì‹œìŠ¤í…œ ì‚¬ì–‘

---

## ì„±ëŠ¥

### ê¶Œì¥ í•˜ë“œì›¨ì–´

| ì»´í¬ë„ŒíŠ¸ | CPU | ë©”ëª¨ë¦¬ | ë””ìŠ¤í¬ | ë„¤íŠ¸ì›Œí¬ |
|----------|-----|--------|--------|----------|
| Supervisor | 2+ ì½”ì–´ | 2GB+ | 10GB+ SSD | 100Mbps+ |
| Agent | 2+ ì½”ì–´ | 4GB+ | 20GB+ SSD | 100Mbps+ |

### í™•ì¥ì„±

- **ì—ì´ì „íŠ¸**: 50ê°œ ì´ìƒì˜ ë™ì‹œ ì—ì´ì „íŠ¸ë¡œ í…ŒìŠ¤íŠ¸ë¨
- **ì„¸ì…˜**: ìŠˆí¼ë°”ì´ì €ë‹¹ 100ê°œ ì´ìƒì˜ ë™ì‹œ ì„¸ì…˜
- **ì´ë²¤íŠ¸**: ì´ˆë‹¹ 10,000ê°œ ì´ìƒì˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ëŸ‰
- **ë°ì´í„°ë² ì´ìŠ¤**: SQLiteê°€ ìˆ˜ë°±ë§Œ ê°œì˜ ì´ë²¤íŠ¸ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬

### ìµœì í™”

```bash
# ì˜¤ë˜ëœ ì´ë²¤íŠ¸ ì•„ì¹´ì´ë¸Œ (ì›”ë³„ ì‹¤í–‰)
sqlite3 /var/lib/hal-o-swarm/supervisor.db \
  "DELETE FROM events WHERE timestamp < datetime('now', '-30 days');"

# ë°ì´í„°ë² ì´ìŠ¤ ì •ë¦¬ (ì•„ì¹´ì´ë¸Œ í›„ ì‹¤í–‰)
sqlite3 /var/lib/hal-o-swarm/supervisor.db "VACUUM;"

# ì¿¼ë¦¬ ìµœì í™”ë¥¼ ìœ„í•œ ë¶„ì„
sqlite3 /var/lib/hal-o-swarm/supervisor.db "ANALYZE;"
```

---

## ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

#### Supervisorê°€ ì‹œì‘ë˜ì§€ ì•ŠìŒ

```bash
# ì„¤ì • í™•ì¸
sudo journalctl -u hal-supervisor -n 50

# í¬íŠ¸ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
sudo lsof -i :8420

# ì„¤ì • í…ŒìŠ¤íŠ¸
/usr/local/bin/hal-supervisor --config /etc/hal-o-swarm/supervisor.config.json --validate
```

#### Agentê°€ ì—°ê²°í•  ìˆ˜ ì—†ìŒ

```bash
# Supervisor ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
sudo systemctl status hal-supervisor

# ì¸ì¦ í† í° ì¼ì¹˜ í™•ì¸
grep auth_token /etc/hal-o-swarm/supervisor.config.json
grep auth_token /etc/hal-o-swarm/agent.config.json

# ë„¤íŠ¸ì›Œí¬ ì—°ê²° í…ŒìŠ¤íŠ¸
curl -v ws://ìŠˆí¼ë°”ì´ì €-í˜¸ìŠ¤íŠ¸:8420
```

#### ë†’ì€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰

```bash
# í˜„ì¬ ì‚¬ìš©ëŸ‰ í™•ì¸
ps aux | grep hal-supervisor

# systemd ë©”ëª¨ë¦¬ ì œí•œ ì¦ê°€
sudo systemctl edit hal-supervisor
# ì¶”ê°€: MemoryMax=4G

# ì˜¤ë˜ëœ ë°ì´í„° ì•„ì¹´ì´ë¸Œ
sqlite3 /var/lib/hal-o-swarm/supervisor.db \
  "DELETE FROM events WHERE timestamp < datetime('now', '-7 days');"
```

í¬ê´„ì ì¸ ë¬¸ì œ í•´ê²° ì ˆì°¨ëŠ” [RUNBOOK.md](docs/RUNBOOK.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

---

## ê¸°ì—¬

ê¸°ì—¬ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤! ë‹¤ìŒ ì‚¬í•­ì€ [DEVELOPMENT.md](docs/DEVELOPMENT.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”:

- ê°œë°œ í™˜ê²½ ì„¤ì •
- ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¼ì¸
- í…ŒìŠ¤íŠ¸ ìš”êµ¬ì‚¬í•­
- Pull Request í”„ë¡œì„¸ìŠ¤

---

## ë¼ì´ì„ ìŠ¤

MIT ë¼ì´ì„ ìŠ¤ - ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ ì°¸ì¡°

---

## ì§€ì›

- **ë¬¸ì„œ**: [docs/](docs/) ë””ë ‰í† ë¦¬
- **ì´ìŠˆ**: [GitHub Issues](https://github.com/bldg-7/hal-o-swarm/issues)
- **Discord**: #hal-o-swarm ì±„ë„
- **ì´ë©”ì¼**: support@example.com

---

## ë³€ê²½ ë¡œê·¸

### ë²„ì „ 1.0.0 (2026ë…„ 2ì›”)

**ì´ˆê¸° ë¦´ë¦¬ìŠ¤**

- ì„¸ì…˜ ì¶”ì  ë° ì´ë²¤íŠ¸ ë¼ìš°íŒ…ì´ í¬í•¨ëœ Supervisor
- WebSocket ì¬ì—°ê²° ë° ì´ë²¤íŠ¸ í¬ì›Œë”©ì´ í¬í•¨ëœ Agent
- Discord ìŠ¬ë˜ì‹œ ëª…ë ¹ í†µí•© (9ê°œ ëª…ë ¹)
- Bearer í† í° ì¸ì¦ì´ í¬í•¨ëœ HTTP API
- Anthropic ë° OpenAIì˜ ë¹„ìš© ì§‘ê³„
- ìë™ ê°œì… ì •ì±… ì—”ì§„
- ì›ê²© ê´€ë¦¬ë¥¼ ìœ„í•œ CLI ë„êµ¬ (halctl)
- TLS ì§€ì› ë° ë³´ì•ˆ ê°•í™”
- Prometheus ë©”íŠ¸ë¦­ ë° í—¬ìŠ¤ ì²´í¬
- í¬ê´„ì ì¸ ë°°í¬ ë¬¸ì„œ

---

**HAL-O-SWARM íŒ€ì´ â¤ï¸ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤**
